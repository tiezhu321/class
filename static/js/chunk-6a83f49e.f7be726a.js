(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a83f49e"],{"1b62":function(t,e,a){"use strict";var o={data:function(){return{start:1,limit:10,total:0,currentPage:1}},methods:{handleCurrentChange:function(t){this.start=t,this.init(),this.initDialog()},handleSizeChange:function(t){this.limit=t,this.init(),this.initDialog()}}};e["a"]=o},"4cdd":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"padding_30"},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.add}},[t._v("新增")])],1),a("el-table",{staticClass:"margin_30",staticStyle:{width:"100%"},attrs:{align:"center",data:t.list,border:""}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"50",fixed:"left"}}),a("el-table-column",{attrs:{align:"center",label:"商品图片",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"img",attrs:{src:t.row.pic,alt:"图片已丢失"}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"活动时间",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(" 开始时间:"+t._s(e.row.promotionStartTime)+" "),a("br"),t._v(" 结束时间:"+t._s(e.row.promotionEndTime)+" ")])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"out",label:"是否过期",width:"180"}}),a("el-table-column",{attrs:{align:"center",prop:"name",label:"商品名称",width:"180"}}),a("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌名称",width:"180"}}),a("el-table-column",{attrs:{align:"center",prop:"price",label:"商品价格",width:"180"}}),a("el-table-column",{attrs:{align:"center",prop:"productCategoryName ",label:"商品类别",width:"180"}}),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间",width:"180"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"danger",underline:!1},on:{click:function(a){return t.clear(e.row.recommendId)}}},[t._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{width:"80%",title:"热销详情",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{staticClass:"card"},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("条件查询")])]),a("el-form",{attrs:{inline:!0,size:"mini",model:t.form,"label-width":"80px"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"商品名称/模糊查询"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"商品货号"},model:{value:t.form.productSn,callback:function(e){t.$set(t.form,"productSn",e)},expression:"form.productSn"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"品牌"},on:{change:t.getName},model:{value:t.form.orderType,callback:function(e){t.$set(t.form,"orderType",e)},expression:"form.orderType"}},t._l(t.findList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"上架状态"},model:{value:t.form.publishStatus,callback:function(e){t.$set(t.form,"publishStatus",e)},expression:"form.publishStatus"}},[a("el-option",{attrs:{label:"上架",value:"1"}}),a("el-option",{attrs:{label:"未上架",value:"0"}})],1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"审核状态"},model:{value:t.form.verifyStatus,callback:function(e){t.$set(t.form,"verifyStatus",e)},expression:"form.verifyStatus"}},[a("el-option",{attrs:{label:"审核",value:"1"}}),a("el-option",{attrs:{label:"未审核",value:"0"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.re}},[t._v("重置")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("搜索")])],1)],1)],1)],1),a("div",[a("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("商品列表")])]),a("el-table",{staticClass:"margin_30",staticStyle:{width:"100%"},attrs:{align:"center",data:t.dialogList,border:""}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"50",fixed:"left"}}),a("el-table-column",{attrs:{align:"center",label:"选择"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{attrs:{label:e.row.id},on:{change:t.radioEvents},model:{value:t.selectedGoods,callback:function(e){t.selectedGoods=e},expression:"selectedGoods"}},[a("span")])]}}])}),a("el-table-column",{attrs:{align:"center",label:"展示图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"img",attrs:{src:t.row.pic,alt:"图片已丢失"}})]}}])}),a("el-table-column",{attrs:{align:"center",label:"商品名称",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.detailTitle)+" "),a("br"),t._v(" 品牌:"+t._s(e.row.brandName)+" "),a("br"),t._v(" "+t._s(e.row.description)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"商品价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 原价:"+t._s(e.row.originalPrice)+" "),a("br"),t._v(" 现价:"+t._s(e.row.price)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",prop:"productCategoryName",label:"商品类别"}}),a("el-table-column",{attrs:{align:"center",prop:"weight",label:"重量"}})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20,25],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")])],1)]),a("el-dialog",{attrs:{title:"编辑限时活动",visible:t.isShow},on:{"update:visible":function(e){t.isShow=e}}},[a("el-form",{attrs:{inline:!0,model:t.form}},[a("el-form-item",{attrs:{label:"商品原价"}},[a("el-input",{attrs:{readonly:!0,autocomplete:"off"},model:{value:t.formData.price,callback:function(e){t.$set(t.formData,"price",e)},expression:"formData.price"}})],1),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{readonly:!0,autocomplete:"off"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"促销价格"}},[[a("el-input-number",{attrs:{min:1,max:1e4},model:{value:t.formData.promotionPrice,callback:function(e){t.$set(t.formData,"promotionPrice",e)},expression:"formData.promotionPrice"}})]],2),a("el-form-item",{attrs:{label:"排序"}},[[a("el-input-number",{attrs:{min:1,max:1e4},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",e)},expression:"formData.sort"}})]],2),a("el-form-item",{attrs:{label:"开始时间"}},[[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始时间"},model:{value:t.formData.promotionStartTime,callback:function(e){t.$set(t.formData,"promotionStartTime",e)},expression:"formData.promotionStartTime "}})]],2),a("el-form-item",{attrs:{label:"结束时间"}},[[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"结束时间"},model:{value:t.formData.promotionEndTime,callback:function(e){t.$set(t.formData,"promotionEndTime",e)},expression:"formData.promotionEndTime  "}})]],2),a("el-form-item",{attrs:{label:"商品图片"}},[[a("img",{attrs:{src:t.formData.pic,alt:""}})]],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShow=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onload}},[t._v("确 定")])],1)],1)],1)},i=[],l=(a("7db0"),a("d3b7"),a("159b"),a("1b62")),n=a("6cd9"),r=a("b775");function s(){return Object(r["a"])({url:"/lejuAdmin/homeRecommend/findAllRecommends"})}function c(t){return Object(r["a"])({url:"/lejuAdmin/homeRecommend/delRecommend/".concat(t),method:"delete"})}function d(){return Object(r["a"])({url:"/lejuAdmin/brand/findAllBrand"})}function u(t){return Object(r["a"])({url:"/lejuAdmin/homeRecommend/addRecommend",method:"post",data:t})}var m={mixins:[l["a"]],data:function(){return{findList:[],selectedGoods:"",list:[],out:"",dialogTableVisible:!1,isShow:!1,dialogList:[],form:{brandId:"",id:"",name:"",productCategoryId:"",productSn:"",publishStatus:"",verifyStatus:""},formData:{brandName:"",createTime:"",modifyTime:"",name:"",pic:"",price:"",productCategoryName:"",productId:"",productSn:"",promotionEndTime:"",promotionPerLimit:"",promotionPrice:"",promotionStartTime:"",publishStatus:"",recommendId:"",sort:"",type:""}}},computed:{},created:function(){this.init(),this.initDialog(),this.finds()},mounted:function(){},methods:{onload:function(){var t=this;u(this.formData).then((function(e){e.success&&(t.isShow=!t.isShow,t.dialogTableVisible=!t.dialogTableVisible,t.init()),console.log("新增限时活动",e)}))},getName:function(t){console.log(t),this.form.brandId=this.findList.find((function(e){return e.id==t})).id},radioEvents:function(t){var e=this.dialogList.find((function(e){return e.id==t}));this.formData=e,this.formData.productId=e.id,this.formData.recommendId="",this.formData.type="",this.isShow=!this.isShow},re:function(){this.form={brandId:"",id:"",name:"",productCategoryId:"",productSn:"",publishStatus:"",verifyStatus:""}},onSubmit:function(){this.initDialog()},finds:function(){var t=this;d().then((function(e){console.log("品牌列表",e),t.findList=e.data.items}))},initDialog:function(){var t=this;Object(n["b"])(this.start,this.limit,this.form).then((function(e){console.log("商品列表",e),t.dialogList=e.data.rows,t.total=e.data.total}))},add:function(){this.dialogTableVisible=!0},clear:function(t){var e=this;c(t).then((function(t){console.log(t),e.init()}))},init:function(){var t=this;s().then((function(e){console.log("限时活动",e);var a=Date.now();console.log(a),e.data.items.forEach((function(t){t.out="",Date.parse(t.promotionEndTime)-a>0?t.out="否":t.out="过期"})),t.list=e.data.items}))}}},f=m,p=(a("642a"),a("2877")),b=Object(p["a"])(f,o,i,!1,null,"7adf21c8",null);e["default"]=b.exports},"642a":function(t,e,a){"use strict";a("7709")},"6cd9":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return l}));a("99af");var o=a("b775");function i(t,e,a){return Object(o["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"post",data:a})}function l(){return Object(o["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:data})}},7709:function(t,e,a){},"7db0":function(t,e,a){"use strict";var o=a("23e7"),i=a("b727").find,l=a("44d2"),n=a("ae40"),r="find",s=!0,c=n(r);r in[]&&Array(1)[r]((function(){s=!1})),o({target:"Array",proto:!0,forced:s||!c},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),l(r)}}]);