(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00250d68"],{"7db0":function(t,e,o){"use strict";var a=o("23e7"),i=o("b727").find,l=o("44d2"),r=o("ae40"),n="find",s=!0,c=r(n);n in[]&&Array(1)[n]((function(){s=!1})),a({target:"Array",proto:!0,forced:s||!c},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),l(n)},"9c39":function(t,e,o){"use strict";o("cf2e")},cf2e:function(t,e,o){},e81e:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("el-button",{attrs:{size:"default",type:"primary"},on:{click:t.add}},[t._v("新增")])],1)]),o("el-table",{staticClass:"margin_30",staticStyle:{width:"100%"},attrs:{align:"center",data:t.list,border:""}},[o("el-table-column",{attrs:{align:"center",label:"序号",type:"index",width:"50",fixed:"left"}}),o("el-table-column",{attrs:{align:"center",prop:"name",label:"品牌名称",width:"180"}}),o("el-table-column",{attrs:{align:"center",label:"展示状态",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 是否展示: "),o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(o){return t.changeArticle(e.row.id)}},model:{value:e.row.showStatus,callback:function(o){t.$set(e.row,"showStatus",o)},expression:"scope.row.showStatus"}})]}}])}),o("el-table-column",{attrs:{align:"center",label:"logo",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("img",{staticClass:"img",attrs:{src:t.row.logo,alt:"图片已丢失"}})]}}])}),o("el-table-column",{attrs:{align:"center",label:"专区大图",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("img",{staticClass:"img",attrs:{src:t.row.bigPic,alt:"图片已丢失"}})]}}])}),o("el-table-column",{attrs:{align:"center",prop:"brandStory",label:"品牌故事",width:"180"}}),o("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间",width:"180"}}),o("el-table-column",{attrs:{align:"center",prop:"sort",label:"排序",width:"180"}}),o("el-table-column",{attrs:{align:"center",prop:"productCommentCount",label:"产品评论数量",width:"180"}}),o("el-table-column",{attrs:{align:"center",prop:"productCount",label:"产品数量",width:"180"}}),o("el-table-column",{attrs:{align:"center",prop:"factoryStatus",label:"是否品牌制造商",width:"180"}}),o("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"button"},[o("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(o){return t.edit(e.row)}}},[t._v("编辑")]),o("el-link",{attrs:{type:"danger",underline:!1},on:{click:function(o){return t.clear(e.row.id)}}},[t._v("删除")])],1)]}}])})],1),o("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20,25],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),o("el-dialog",{attrs:{title:"品牌详情",visible:t.dialogFormVisible},on:{close:t.clearForm,"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-row",{attrs:{gutter:20}},[o("el-form",{attrs:{"label-width":"180px",inline:!0,model:t.form}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"品牌名称"}},[o("el-input",{attrs:{size:"medium",autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"排序"}},[o("el-input",{attrs:{size:"medium",autocomplete:"off"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),o("el-form-item",{attrs:{label:"是否展示"}},[o("el-switch",{model:{value:t.form.showStatus,callback:function(e){t.$set(t.form,"showStatus",e)},expression:"form.showStatus"}})],1),o("br"),o("el-form-item",{attrs:{label:"上传专区大图"}},[[o("el-upload",{staticClass:"upload-demo",attrs:{"on-success":t.getUpLoadImg,headers:t.headers,action:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOssSave",limit:1}},[t.form.bigPic?o("img",{staticClass:"avatar",attrs:{src:t.form.bigPic}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]],2)],1),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"首字母"}},[o("el-input",{attrs:{size:"medium",autocomplete:"off"},model:{value:t.form.firstLetter,callback:function(e){t.$set(t.form,"firstLetter",e)},expression:"form.firstLetter"}})],1),o("el-form-item",{attrs:{label:"产品数量"}},[o("el-input",{attrs:{size:"medium",autocomplete:"off"},model:{value:t.form.productCount,callback:function(e){t.$set(t.form,"productCount",e)},expression:"form.productCount"}})],1),o("el-form-item",{attrs:{label:"是否为品牌制造商"}},[o("el-switch",{model:{value:t.form.factoryStatus,callback:function(e){t.$set(t.form,"factoryStatus",e)},expression:"form.factoryStatus"}})],1),o("br"),o("el-form-item",{attrs:{label:"上传Logo"}},[[o("el-upload",{staticClass:"upload-demo",attrs:{"on-success":t.getUpLoadLogo,headers:t.headers,action:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOssSave",limit:1}},[t.form.logo?o("img",{staticClass:"avatar",attrs:{src:t.form.logo}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]],2)],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.addList}},[t._v("确 定")])],1)],1)],1)},i=[],l=(o("7db0"),o("d3b7"),o("159b"),o("2f4d")),r=(o("99af"),o("b775"));function n(t,e){return Object(r["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e)})}function s(t){return Object(r["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/lejuAdmin/brand/delBrand/".concat(t),method:"delete"})}function u(t){return Object(r["a"])({url:"/lejuAdmin/brand/switchShowStatus",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}var m={data:function(){return{current:0,list:[],start:1,limit:10,currentPage:1,total:0,dialogFormVisible:!1,headers:{token:Object(l["b"])()},form:{bigPic:"",brandStory:"",createTime:"",factoryStatus:"",firstLetter:"",id:"",logo:"",modifyTime:"",name:"",productCommentCount:"",productCount:"",showStatus:"",sort:""}}},computed:{},created:function(){this.init()},mounted:function(){},methods:{changeArticle:function(t){var e=this,o=this.list.find((function(e){return e.id==t}));u({id:t,status:o.showStatus?1:0}).then((function(t){console.log("修改显示",t),e.init()}))},clearForm:function(){this.form={bigPic:"",brandStory:"",createTime:"",factoryStatus:"",firstLetter:"",id:"",logo:"",modifyTime:"",name:"",productCommentCount:"",productCount:"",showStatus:"",sort:""}},edit:function(t){this.dialogFormVisible=!this.dialogFormVisible,this.form=t},addList:function(){var t=this;this.dialogFormVisible=!this.dialogFormVisible,this.form.factoryStatus=this.form.factoryStatus?1:0,this.form.showStatus=this.form.showStatus?1:0,this.form.id?d(this.form).then((function(e){e.success&&(t.init(),console.log("修改",e))})):s(this.form).then((function(e){e.success&&(t.init(),console.log("新增",e))}))},getUpLoadImg:function(t){console.log("上传图片",t),this.form.bigPic=t.data.material.ossUrl},getUpLoadLogo:function(t){console.log("上传logo",t),this.form.logo=t.data.material.ossUrl},add:function(){this.dialogFormVisible=!this.dialogFormVisible},clear:function(t){var e=this;c(t).then((function(t){console.log("删除",t),e.init()}))},handleSizeChange:function(t){console.log(t),this.limit=t,this.init()},handleCurrentChange:function(t){console.log(t),this.start=t,this.init()},init:function(){var t=this;n(this.start,this.limit).then((function(e){console.log(e),e.data.rows.forEach((function(t){t.showStatus=!!t.showStatus,t.factoryStatus=t.factoryStatus?"是":"不是"})),t.list=e.data.rows,t.total=e.data.total}))}}},f=m,h=(o("9c39"),o("2877")),b=Object(h["a"])(f,a,i,!1,null,"1a025571",null);e["default"]=b.exports}}]);